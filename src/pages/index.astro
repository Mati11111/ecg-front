---
import Layout from "@/layouts/Layout.astro";
import { backendUrl } from "@/assets/getBackendUrl.astro";
let serverStatus = "DISCONNECTED";
try {
  const res = await fetch(`${backendUrl}/health`);  
  const data = await res.json();
  if (data.ok) serverStatus = "CONNECTED";
} catch (e) {
  serverStatus = "DISCONNECTED";
}
console.log('Trying to connect to',backendUrl);
---

<Layout>
  <div
    id="background"
    class="bg-[#666161] min-h-[calc(100vh-1rem)] m-2 flex items-center justify-center"
  >
    <div class="flex w-full h-full">
      <div id="left-container" class="flex flex-col w-1/2">
        <div
          id="upper-container"
          class="bg-black bg-opacity-60 rounded-lg m-3 p-5 flex flex-col items-center justify-center"
        >
          <div class="flex flex-row w-full items-center justify-center">
            <div id="bpm-electrodes-container" class="flex flex-col">
              <div id="bpm-container" class="flex flex-col items-center h-full">
                <p class="text-4xl p-3 font-bold text-white">BPM</p>
                <p class="text-4xl p-3 font-bold text-white">75.2</p>
              </div>
              <div id="electrodes-container" class="flex flex-col items-center">
                <div class="flex flex-row items-center">
                  <p class="text-4xl p-3 font-bold text-white">R</p>
                  <img
                    src="/dotfilled.svg"
                    alt="Heart Icon"
                    class="w-20 h-20"
                  />
                </div>
                <div class="flex flex-row items-center">
                  <p class="text-4xl p-3 font-bold text-white">F</p>
                  <img src="/dotempty.svg" alt="Heart Icon" class="w-20 h-20" />
                </div>
                <div class="flex flex-row items-center">
                  <p class="text-4xl p-3 font-bold text-white">L</p>
                  <img src="/dotempty.svg" alt="Heart Icon" class="w-20 h-20" />
                </div>
              </div>
            </div>
            <div id="signals-container" class="bg-black w-full h-[400px] m-5">
            </div>
            <div
              id="bpm-electrodes-container"
              class="flex flex-col justify-between"
            >
              <div id="bpm-container" class="flex flex-col items-center h-full">
                <p class="text-4xl p-3 font-bold text-white">AGE</p>
                <p class="text-4xl p-3 font-bold text-white">18</p>
              </div>

              <div id="electrodes-container" class="flex flex-col items-center">
                <p class="text-4xl p-3 font-bold text-white">WEIGHT</p>
                <p class="text-4xl p-3 font-bold text-white">62.5</p>
                <p class="text-4xl p-3 font-bold text-white mb-4">MALE</p>
              </div>
            </div>
          </div>
          <div class="flex flex-row">
            <div class="items-center justify-center gap-4 mt-4 -ml-10">
              <button
                class="bg-[#ffffff] bg-opacity-60 font-bold text-white px-6 py-2"
                >STOP</button
              >
              <button
                class="bg-[#000000] bg-opacity-60 font-bold text-white px-6 py-2"
                >START</button
              >
            </div>
            <p class="text-4xl p-3 font-bold text-white">00:00</p>
          </div>
        </div>

        <div id="lower-container" class="bg-black bg-opacity-60 rounded-lg m-3">
          <p class="text-4xl p-5 font-bold text-white">
            ECG Heartbeat Categorization
          </p>
          <div>
            <div class="flex flex-row h-full">
              <div
                id="signals-container"
                class="bg-black w-3/4 h-[250px] mb-0 m-5"
              >
              </div>
              <div class="flex flex-col items-center justify-center w-1/4">
                <p class="text-3xl p-5 pb-0 font-bold text-white">SERVER</p>
                <p class="text-3xl p-5 pt-0 font-bold text-white">STATUS</p>
                <p class="text-1xl p-5 font-bold text-white">{serverStatus}</p>
                <button
                  class="bg-[#000000] bg-opacity-60 font-bold text-white px-6 py-2"
                  >RUN</button
                >
              </div>
            </div>
            <p class="text-1sm p-5 ml-2 font-bold text-white w-3/4">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
              eiusmod tempor incididunt ut labore et dolore magna aliqua. Lorem
              ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
              tempor incididunt ut labore et dolore magna aliqua.
            </p>
          </div>
        </div>
      </div>
      <div id="right-container" class="flex flex-col w-1/2 h-full">
        <div
          id="1st-container"
          class="bg-black bg-opacity-60 rounded-lg m-3 flex flex-row"
        >
          <div class="flex flex-col w-2/3">
            <p class="text-4xl p-5 pb-0 -mb-2 font-bold text-white">P-WAVES</p>
            <div class="flex flex-col">
              <div id="signals-container" class="bg-black w-full h-[200px] m-5">
              </div>
              <div class="flex ml-6 -mt-4 pb-4 justify-between gap-4">
                <button
                  class="bg-[#ffffff] bg-opacity-60 font-bold text-white px-8 py-1"
                  >STOP</button
                >
                <button
                  class="bg-[#000000] bg-opacity-60 font-bold -mr-5 text-white px-8 py-1"
                  >START</button
                >
              </div>
            </div>
          </div>
          <div class="flex flex-col w-1/3 items-center justify-center">
            <p class="text-4xl p-5 pb-0 font-bold text-white">Normal</p>
            <p class="text-4xl p-5 pb-0 font-bold text-white">120</p>
            <p class="text-4xl p-5 pb-0 font-bold text-white">Anormal</p>
            <p class="text-4xl p-5 pb-0 font-bold text-white">20</p>
          </div>
        </div>
        <div
          id="2nd-container"
          class="bg-black bg-opacity-60 rounded-lg m-3 flex flex-row"
        >
          <div class="flex flex-col w-2/3">
            <p class="text-4xl p-5 pb-0 -mb-2 font-bold text-white">
              QRS-WAVES
            </p>
            <div class="flex flex-col">
              <div id="signals-container" class="bg-black w-full h-[200px] m-5">
              </div>
              <div class="flex ml-6 -mt-4 pb-7 justify-between gap-4">
                <button
                  class="bg-[#ffffff] bg-opacity-60 font-bold text-white px-8 py-1"
                  >STOP</button
                >
                <button
                  class="bg-[#000000] bg-opacity-60 font-bold -mr-5 text-white px-8 py-1"
                  >START</button
                >
              </div>
            </div>
          </div>
          <div class="flex flex-col w-1/3 items-center justify-center">
            <p class="text-4xl p-5 pb-0 font-bold text-white">Normal</p>
            <p class="text-4xl p-5 pb-0 font-bold text-white">100</p>
            <p class="text-4xl p-5 pb-0 font-bold text-white">Anormal</p>
            <p class="text-4xl p-5 pb-0 font-bold text-white">40</p>
          </div>
        </div>
        <div
          id="3rd-container"
          class="bg-black bg-opacity-60 rounded-lg m-3 flex flex-row"
        >
          <div class="flex flex-col w-2/3">
            <p class="text-4xl p-5 pb-0 -mb-2 font-bold text-white">T-WAVES</p>
            <div class="flex flex-col">
              <div id="signals-container" class="bg-black w-full h-[200px] m-5">
              </div>
              <div class="flex ml-6 -mt-4 pb-4 justify-between gap-4">
                <button
                  class="bg-[#ffffff] bg-opacity-60 font-bold text-white px-8 py-1"
                  >STOP</button
                >
                <button
                  class="bg-[#000000] bg-opacity-60 font-bold -mr-5 text-white px-8 py-1"
                  >START</button
                >
              </div>
            </div>
          </div>
          <div class="flex flex-col w-1/3 items-center justify-center">
            <p class="text-4xl p-5 pb-0 font-bold text-white">Normal</p>
            <p class="text-4xl p-5 pb-0 font-bold text-white">130</p>
            <p class="text-4xl p-5 pb-0 font-bold text-white">Anormal</p>
            <p class="text-4xl p-5 pb-0 font-bold text-white">10</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</Layout>
